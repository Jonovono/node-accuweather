{"version":3,"sources":["../../src/index.js"],"names":["request","require","accuweather","API_KEY","baseUrl","getLocationKey","query","params","url","qs","apikey","q","json","then","body","Key","catch","console","error","err","getCurrentConditions","key","details","Summary","WeatherText","Temperature","Imperial","Value","RealFeel","RealFeelTemperature","Precipitation","Precip1hr","module","exports"],"mappings":";;;;AAAA,IAAMA,UAAUC,QAAQ,iBAAR,CAAhB;;AAEA,IAAMC,cAAc,SAAdA,WAAc,GAAM;AACxB,SAAO,UAACC,OAAD,EAAa;AAClB,QAAMC,UAAU,oCAAhB;;AAEA;AACA,QAAMC,iBAAiB,SAAjBA,cAAiB,CAACC,KAAD,EAAW;AAChC,UAAMC,SAAS;AACbC,aAAKJ,UAAU,mCADF;AAEbK,YAAI,EAACC,QAAQP,OAAT,EAAkBQ,GAAGL,KAArB,EAFS;AAGbM,cAAM;AAHO,OAAf;AAKA,aAAOZ,QAAQO,MAAR,EACJM,IADI,CACC;AAAA;AAAA,YAAEC,IAAF;;AAAA,eAAaA,KAAKC,GAAlB;AAAA,OADD,EAEJC,KAFI,CAEE;AAAA,eAAOC,QAAQC,KAAR,CAAcC,GAAd,CAAP;AAAA,OAFF,CAAP;AAGD,KATD;;AAWA,QAAMC,uBAAuB,SAAvBA,oBAAuB,CAACd,KAAD,EAAW;AACtC,aAAOD,eAAeC,KAAf,EAAsBH,OAAtB,EACJU,IADI,CACC,eAAO;AACX,YAAMN,SAAS;AACbC,eAAKJ,UAAU,wBAAV,GAAqCiB,GAD7B;AAEbZ,cAAI,EAACC,QAAQP,OAAT,EAAkBmB,SAAS,IAA3B,EAFS;AAGbV,gBAAM;AAHO,SAAf;AAKA,eAAOZ,QAAQO,MAAR,CAAP;AACD,OARI,EASJM,IATI,CASC,iBAAa;AAAA;AAAA,YAAXC,IAAW;;AACjB,eAAO;AACLS,mBAAST,KAAKU,WADT;AAELC,uBAAaX,KAAKW,WAAL,CAAiBC,QAAjB,CAA0BC,KAFlC;AAGLC,oBAAUd,KAAKe,mBAAL,CAAyBH,QAAzB,CAAkCC,KAHvC;AAILG,yBAAehB,KAAKiB,SAAL,CAAeL;AAJzB,SAAP;AAMD,OAhBI,EAiBJV,KAjBI,CAiBE;AAAA,eAAOC,QAAQC,KAAR,CAAcC,GAAd,CAAP;AAAA,OAjBF,CAAP;AAkBD,KAnBD;;AAqBA,WAAO;AACLC,4BAAsBA;AADjB,KAAP;AAGD,GAvCD;AAwCD,CAzCD;;AA2CAY,OAAOC,OAAP,GAAiB/B,WAAjB","file":"index.js","sourcesContent":["const request = require('request-promise')\n\nconst accuweather = () => {\n  return (API_KEY) => {\n    const baseUrl = 'http://dataservice.accuweather.com'\n\n    // Gets the AccuWeather-specific location key so that a query can be made to get the weather\n    const getLocationKey = (query) => {\n      const params = {\n        url: baseUrl + '/locations/v1/cities/autocomplete',\n        qs: {apikey: API_KEY, q: query},\n        json: true\n      }\n      return request(params)\n        .then(([body,]) => body.Key)\n        .catch(err => console.error(err))\n    }\n\n    const getCurrentConditions = (query) => {\n      return getLocationKey(query, API_KEY)\n        .then(key => {\n          const params = {\n            url: baseUrl + '/currentconditions/v1/' + key,\n            qs: {apikey: API_KEY, details: true},\n            json: true\n          }\n          return request(params)\n        })\n        .then(([body,]) => {\n          return {\n            Summary: body.WeatherText,\n            Temperature: body.Temperature.Imperial.Value,\n            RealFeel: body.RealFeelTemperature.Imperial.Value,\n            Precipitation: body.Precip1hr.Imperial\n          }\n        })\n        .catch(err => console.error(err))\n    }\n\n    return {\n      getCurrentConditions: getCurrentConditions\n    }\n  }\n}\n\nmodule.exports = accuweather"]}